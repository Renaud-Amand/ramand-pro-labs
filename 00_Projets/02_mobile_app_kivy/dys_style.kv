#: kivy 2.3.0
# ==============================================================================
# dys_style.kv — Widgets globaux DYS-Ready v2
#
# Ce fichier contient UNIQUEMENT les composants réutilisables partagés par
# tous les écrans. Les designs d'écrans spécifiques se trouvent dans
# assets/screens_kv/*.kv (chargés après ce fichier par main.py).
#
# Contenu :
#   - <DysScreen>       : fond crème appliqué à tous les écrans hérités
#   - <Label>           : style DYS par défaut (OpenDyslexic, contraste doux)
#   - <DysButton>       : bouton DYS réutilisable
#   - <DysTextInput>    : champ de texte DYS réutilisable
#   - <DysPinButton>    : bouton de pavé numérique (grand, arrondi)
#
# Convention : jamais noir pur (#000) sur blanc pur (#FFF).
#              Police OpenDyslexic, tailles sp(), dimensions dp().
# ==============================================================================


# ══════════════════════════════════════════════════════════════════════════════
# FOND GLOBAL — DysScreen
# ══════════════════════════════════════════════════════════════════════════════
<DysScreen>:
    canvas.before:
        Color:
            rgba: 0.98, 0.96, 0.90, 1
        Rectangle:
            pos: self.pos
            size: self.size


# ══════════════════════════════════════════════════════════════════════════════
# LABEL — Style DYS par défaut
# ══════════════════════════════════════════════════════════════════════════════
<Label>:
    font_name: "OpenDyslexic"
    font_size: "18sp"
    color: 0.15, 0.15, 0.20, 1
    halign: "center"
    valign: "middle"
    text_size: self.size


# ══════════════════════════════════════════════════════════════════════════════
# DysButton@Button — Bouton DYS réutilisable
# Usage : DysButton: (hérite de Button avec le style DYS)
# ══════════════════════════════════════════════════════════════════════════════
<DysButton@Button>:
    font_name: "OpenDyslexic"
    font_size: "24sp"
    size_hint_y: None
    height: "56dp"
    background_color: 0.26, 0.52, 0.96, 1
    color: 1, 1, 1, 1
    background_normal: ""
    background_down: ""
    border: [0, 0, 0, 0]
    canvas.before:
        Color:
            rgba: (0.20, 0.44, 0.86, 1) if self.state == 'down' else (0.26, 0.52, 0.96, 1)
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(12), dp(12), dp(12), dp(12)]


# ══════════════════════════════════════════════════════════════════════════════
# DysTextInput@TextInput — Champ de texte DYS réutilisable
# ══════════════════════════════════════════════════════════════════════════════
<DysTextInput@TextInput>:
    font_name: "OpenDyslexic"
    font_size: "24sp"
    foreground_color: 0.15, 0.15, 0.20, 1
    background_color: 1, 1, 1, 0
    cursor_color: 0.26, 0.52, 0.96, 1
    hint_text_color: 0.60, 0.60, 0.65, 1
    size_hint_y: None
    height: "56dp"
    multiline: False
    padding: [dp(16), (self.height - self.line_height) / 2.0, dp(16), 0]
    canvas.before:
        Color:
            rgba: 0.93, 0.91, 0.85, 1
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [dp(10), dp(10), dp(10), dp(10)]
        Color:
            rgba: (0.26, 0.52, 0.96, 1) if self.focus else (0.75, 0.73, 0.68, 1)
        Line:
            rounded_rectangle: [self.x, self.y, self.width, self.height, dp(10)]
            width: 2


# ══════════════════════════════════════════════════════════════════════════════
# DysPinButton@Button — Bouton du pavé numérique enfant
# Massif (80dp min), coins très arrondis, adapté aux doigts d'enfants.
# ══════════════════════════════════════════════════════════════════════════════
<DysPinButton@Button>:
    font_name:  "OpenDyslexic"
    font_size:  "30sp"
    size_hint:  1, 1
    color:      0.15, 0.15, 0.20, 1
    background_color: 0, 0, 0, 0
    background_normal: ""
    background_down:   ""
    canvas.before:
        Color:
            rgba: (0.88, 0.86, 0.80, 1) if self.state == 'down' else (0.93, 0.91, 0.85, 1)
        RoundedRectangle:
            pos:    self.pos
            size:   self.size
            radius: [dp(16), dp(16), dp(16), dp(16)]
